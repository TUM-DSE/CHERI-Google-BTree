# designed by Cristian Sandu <cristian.sandu@tum.de>
#
# flags: DIFF_CPU_EXEC - each thread will be executed on a different CPU core

GCC    = clang-morello
CFLAGS = -lstdc++ -DDIFF_CPU_EXEC -march=morello -mabi=purecap -pthread


INCLUDES := -Ijsonutility/include

# all binaries
ALL = 	mlatency mmemory
all: $(ALL)

mlatency: utils.cpp mlatency.cpp mlatency_timer.cpp
	$(GCC) $(CFLAGS) $(INCLUDES) utils.cpp mlatency.cpp -o mlatency
	$(GCC) $(CFLAGS) $(INCLUDES) utils.cpp mlatency_timer.cpp -o mlatency_timer

mmemory: utils.cpp mmemory.cpp
	$(GCC) $(CFLAGS) $(INCLUDES) utils.cpp mmemory.cpp -o mmemory

clean:
	rm -rf *.out mlatency mmemory
